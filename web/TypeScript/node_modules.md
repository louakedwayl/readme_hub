# Comprendre `node_modules` dans les projets Node.js

## 1. Qu’est-ce que `node_modules` ?

`node_modules` est un dossier créé automatiquement par **npm** dans ton projet. Il contient **tous les paquets (packages) que ton projet utilise**, ainsi que leurs dépendances.

En d’autres termes, **tout ce dont ton code a besoin pour fonctionner** se trouve ici.

---

## 2. Comment `node_modules` est créé

1. Tu ajoutes des paquets à ton projet dans le fichier `package.json` :

```json
{
  "dependencies": {
    "typescript": "^5.9.2"
  },
  "devDependencies": {
    "esbuild": "^0.25.9"
  }
}
```

2. Tu exécutes la commande :

```bash
npm install
```

3. npm télécharge les paquets listés dans `package.json` ainsi que **toutes leurs dépendances** et les place dans `node_modules`.

---

## 3. Structure typique de `node_modules`

```
sandbox/
├─ node_modules/
│  ├─ typescript/
│  ├─ esbuild/
│  └─ ...autres dépendances
├─ package.json
├─ app.ts
├─ index.html
└─ tsconfig.json
```

* Chaque dossier dans `node_modules` contient le code du paquet et ses fichiers nécessaires.
* Les paquets peuvent avoir **leurs propres dépendances imbriquées** dans `node_modules`.

---

## 4. Pourquoi `node_modules` est important

* Il permet à **Node.js et aux outils comme `tsc` ou `esbuild`** de trouver le code nécessaire pour exécuter ton projet.
* Il rend ton projet **auto-suffisant localement**, sans dépendre des versions globales des paquets.
* Chaque projet peut avoir **ses propres versions des paquets**, ce qui évite les conflits.

---

## 5. Bonnes pratiques

1. **Ne jamais modifier directement `node_modules`**

   * Les paquets sont gérés par npm. Les modifications seraient écrasées lors d’une réinstallation.

2. **Ajouter `node_modules` dans `.gitignore`**

   * Ce dossier peut être très lourd et ne doit pas être versionné.

   ```gitignore
   node_modules/
   ```

3. **Utiliser `package.json` et `package-lock.json` pour reproduire l’environnement**

   * Pour partager ton projet, il suffit de transmettre ces fichiers et de faire `npm install`.

---

## 6. Commandes utiles

* Installer toutes les dépendances :

```bash
npm install
```

* Installer un paquet localement :

```bash
npm install lodash
```

* Installer un paquet pour le développement seulement :

```bash
npm install --save-dev jest
```

* Supprimer un paquet :

```bash
npm uninstall esbuild
```

* Lister les paquets installés :

```bash
npm list
```

---

### Conclusion

`node_modules` est **le cœur de l’écosystème Node.js**.
Il permet de gérer toutes les dépendances d’un projet, en les isolant pour éviter les conflits entre projets.
Grâce à lui, tu peux exécuter ton code en toute sécurité, sans dépendre de paquets installés globalement.

